/**
 * @class Ext.ux.ToolkitUtilities
 *
 * Toolkiit-specific Utility Singleton
 * 
 * @singleton
 * 
 */
Ext.define('Ext.ux.ToolkitUtilities', 
{
    alias: 'TktUtils', 
    alternateClassName: 'TkUtils',
    singleton: true,

    requires: [
        'Ext.LoadMask'
    ],

    privates: {
        masks: [],
        maskId: 0
    },

    mask: function(cmp, msg)
    {
        cmp.setMasked(
        {
            xtype: 'loadmask',
            message: msg
        });

        this.masks.push({
            id: ++this.maskId,
            cmp: cmp
        });

        return this.maskId;
    },

    unmask: function(maskId)
    {
        var cmp,
            cmpIdx = -1;
        for (var m in this.masks)
        {
            if (this.masks[m].id === maskId) {
                cmp = this.masks[m].cmp;
                cmpIdx = m;
                break;
            }
        }
        if (cmp)
        {
            if (!cmp.destroyed) {
                cmp.setMasked(false);
            }
            if (cmpIdx !== -1) {
                this.masks.splice(cmpIdx, 1);
            }
        }
    }

});
